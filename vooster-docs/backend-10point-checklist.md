# 10점 만점 백엔드 달성 체크리스트

**목표**: 8주 내에 모든 항목 완료

---

## 1주차: JWT 토큰 관리 중앙화

### 개발 항목

- [ ] **TokenManager 클래스 구현**
  - [ ] `generateAccessToken()` 메서드
  - [ ] `generateRefreshToken()` 메서드
  - [ ] `generateTokenPair()` 메서드
  - [ ] `verifyAccessToken()` 메서드
  - [ ] `verifyRefreshToken()` 메서드
  - [ ] `refreshAccessToken()` 메서드
  - [ ] `getExpiryTime()` 메서드
  - [ ] `isExpiringSoon()` 메서드

- [ ] **Socket.IO 인증 미들웨어**
  - [ ] `authMiddleware()` 구현
  - [ ] Socket.IO에 미들웨어 등록
  - [ ] `socket.data` 객체에 사용자 정보 저장

- [ ] **토큰 갱신 API 엔드포인트**
  - [ ] `POST /api/auth/refresh` 구현
  - [ ] Refresh Token 검증
  - [ ] 새 Access Token 생성
  - [ ] 새 Refresh Token 생성

- [ ] **클라이언트 토큰 매니저**
  - [ ] `ClientTokenManager` 클래스 구현
  - [ ] 자동 토큰 갱신 로직
  - [ ] 갱신 타이머 관리
  - [ ] Authorization 헤더 생성

### 테스트

- [ ] JWT 토큰 발급 테스트
- [ ] Token 만료 테스트
- [ ] Token 갱신 테스트
- [ ] Token 검증 테스트
- [ ] Socket.IO 연결 시 인증 테스트

### 문서화

- [ ] 토큰 관리 아키텍처 다이어그램
- [ ] API 문서 (토큰 갱신)
- [ ] 사용 예시 (클라이언트/서버)

### 예상 점수

- 아키텍처 복잡도: 6/10 → 7/10
- 보안: 7/10 → 8/10
- 운영성: 4/10 → 4.5/10
- **주차 평균**: 6.5/10

---

## 2주차: 메시지 보증 메커니즘

### 개발 항목

- [ ] **Idempotency 관리 (IdempotencyManager)**
  - [ ] `register()` 메서드 - 요청 ID 등록
  - [ ] `saveResult()` 메서드 - 결과 저장
  - [ ] `getResult()` 메서드 - 결과 조회
  - [ ] `remove()` 메서드 - 요청 ID 제거
  - [ ] Redis에 저장 (TTL: 1시간)

- [ ] **Dead Letter Queue (DLQ)**
  - [ ] `push()` 메서드 - 실패 메시지 저장
  - [ ] `getMessages()` 메서드 - 메시지 조회
  - [ ] `remove()` 메서드 - 메시지 삭제
  - [ ] `getStats()` 메서드 - 통계
  - [ ] Redis Streams 사용

- [ ] **ACK 메커니즘**
  - [ ] Socket.IO 콜백 구현
  - [ ] Trigger 핸들러에 ACK 통합
  - [ ] Navigate 핸들러에 ACK 통합
  - [ ] 클라이언트에서 ACK 대기

- [ ] **Trigger 핸들러 개선**
  - [ ] 입력 검증 (Zod)
  - [ ] 타임스탐프 검증
  - [ ] 중복 요청 확인
  - [ ] 비즈니스 로직 실행
  - [ ] DLQ로 실패 처리

### 테스트

- [ ] 중복 메시지 방지 테스트
- [ ] DLQ 메시지 저장 테스트
- [ ] DLQ 메시지 조회 테스트
- [ ] ACK 콜백 테스트
- [ ] 메시지 손실률 측정 (목표: < 1%)

### 문서화

- [ ] DLQ 아키텍처 다이어그램
- [ ] Idempotency 플로우차트
- [ ] 모니터링 대시보드 설명

### 예상 점수

- 안정성: 5/10 → 7/10
- 성능: 6/10 → 6.5/10
- **주차 평균**: 7.5/10

---

## 3주차: 안정성 강화

### 개발 항목

- [ ] **재시도 큐 (RetryQueue)**
  - [ ] `enqueue()` 메서드 - 재시도 큐 추가
  - [ ] `retry()` 메서드 (private) - 재시도 실행
  - [ ] Exponential Backoff 구현 (1s, 2s, 4s, 8s, 16s, 32s)
  - [ ] Max Retries 처리 (3회 초과 시 DLQ)
  - [ ] Redis 타이머 관리

- [ ] **Circuit Breaker 패턴**
  - [ ] `execute()` 메서드 - 명령 실행
  - [ ] `CLOSED` 상태 관리
  - [ ] `OPEN` 상태 관리 (5회 실패)
  - [ ] `HALF_OPEN` 상태 관리 (회복 시도)
  - [ ] 상태 변화 로깅
  - [ ] 메트릭 수집

- [ ] **Heartbeat + Timeout 감지**
  - [ ] 서버 heartbeat 구현 (25초 간격)
  - [ ] 클라이언트 pong 응답
  - [ ] Timeout 감지 (5초)
  - [ ] 타임아웃 시 연결 해제
  - [ ] 재연결 로직

- [ ] **자동 재연결 설정 최적화**
  - [ ] `reconnectionDelay`: 100ms
  - [ ] `reconnectionDelayMax`: 1000ms
  - [ ] `reconnectionDelayMultiplier`: 1.5
  - [ ] `retries`: Infinity

### 테스트

- [ ] 재시도 로직 테스트
- [ ] Exponential Backoff 검증
- [ ] Circuit Breaker 상태 전이 테스트
- [ ] Heartbeat timeout 테스트
- [ ] 자동 복구율 측정 (목표: 95% 이상)

### 문서화

- [ ] Circuit Breaker 상태 다이어그램
- [ ] 재시도 타이밍 다이어그램
- [ ] Heartbeat 메커니즘 설명

### 예상 점수

- 안정성: 7/10 → 8/10
- 복잡도: 7/10 → 8/10
- **주차 평균**: 8/10

---

## 4주차: 운영성 개선

### 개발 항목

- [ ] **구조화된 로깅 (Winston/Pino)**
  - [ ] Pino 로거 설정
  - [ ] `withLogger()` 헬퍼 함수
  - [ ] 구조화된 로그 포맷
  - [ ] 컨텍스트 정보 포함
  - [ ] Error 스택 트레이스

- [ ] **Prometheus 메트릭**
  - [ ] `MetricsCollector` 클래스
  - [ ] `recordSuccess()` 메서드
  - [ ] `recordFailure()` 메서드
  - [ ] P95 지연시간 계산
  - [ ] StatsD 연동

- [ ] **헬스 체크 엔드포인트**
  - [ ] `GET /api/health` 구현
  - [ ] Uptime 반환
  - [ ] 메모리 사용량 반환
  - [ ] 활성 연결 수 반환
  - [ ] Docker HEALTHCHECK 지원

- [ ] **모니터링 대시보드 API**
  - [ ] `GET /api/metrics` 구현
  - [ ] 성공률 반환
  - [ ] 에러율 반환
  - [ ] 평균 지연시간 반환
  - [ ] 처리량 반환

### 테스트

- [ ] 로그 출력 테스트
- [ ] 메트릭 수집 테스트
- [ ] 헬스 체크 엔드포인트 테스트
- [ ] 모니터링 대시보드 테스트

### 문서화

- [ ] 로깅 전략 가이드
- [ ] 메트릭 목록 정의
- [ ] 대시보드 사용 설명서

### 예상 점수

- 운영성: 4.5/10 → 7/10
- **주차 평균**: 8.5/10

---

## 5주차: 보안 강화

### 개발 항목

- [ ] **CSRF 방지**
  - [ ] `csrfMiddleware()` 구현
  - [ ] `generateCSRFToken()` 메서드
  - [ ] Redis에 토큰 저장
  - [ ] 토큰 검증 로직

- [ ] **Replay Attack 방지 (NonceManager)**
  - [ ] `registerNonce()` 메서드
  - [ ] 중복 nonce 감지
  - [ ] Redis에 nonce 저장 (TTL: 5분)
  - [ ] 사용자별 nonce 격리

- [ ] **Rate Limiting**
  - [ ] `RateLimiter` 클래스
  - [ ] `checkLimit()` 메서드
  - [ ] Redis 기반 카운팅
  - [ ] 시간 윈도우 관리
  - [ ] Socket.IO 미들웨어 통합

- [ ] **입력 검증 강화**
  - [ ] TriggerSchema 개선
  - [ ] 모든 필드 검증
  - [ ] 길이 제한
  - [ ] 패턴 매칭
  - [ ] 타입 안정성

### 테스트

- [ ] CSRF 토큰 검증 테스트
- [ ] Replay Attack 방지 테스트
- [ ] Rate limiting 테스트
- [ ] 입력 검증 테스트
- [ ] 보안 취약점 스캔

### 문서화

- [ ] 보안 아키텍처 다이어그램
- [ ] 보안 모범 사례 가이드
- [ ] 위협 모델 분석

### 예상 점수

- 보안: 8/10 → 10/10
- **주차 평균**: 9/10

---

## 6주차: 성능 최적화

### 개발 항목

- [ ] **메시지 배치 처리 (BatchProcessor)**
  - [ ] `add()` 메서드
  - [ ] `flush()` 메서드 (private)
  - [ ] 배치 크기 설정 (50)
  - [ ] 배치 타임아웃 설정 (1초)

- [ ] **연결 풀링**
  - [ ] 연결 풀 구현
  - [ ] 연결 재사용
  - [ ] 최대 연결 수 관리
  - [ ] 유휴 연결 정리

- [ ] **Redis 캐싱 전략**
  - [ ] 자주 사용되는 데이터 캐싱
  - [ ] 캐시 만료 시간 설정
  - [ ] 캐시 무효화 전략
  - [ ] 캐시 히트율 모니터링

- [ ] **성능 벤치마크**
  - [ ] 지연시간 측정 (목표: P95 < 250ms)
  - [ ] 처리량 측정 (목표: 1,000 메시지/분)
  - [ ] 메모리 사용량 측정
  - [ ] CPU 사용률 측정

### 테스트

- [ ] 배치 처리 성능 테스트
- [ ] 연결 풀 성능 테스트
- [ ] 캐시 히트율 테스트
- [ ] 전체 시스템 부하 테스트

### 문서화

- [ ] 성능 튜닝 가이드
- [ ] 벤치마크 결과 보고서
- [ ] 캐싱 전략 설명

### 예상 점수

- 성능: 6.5/10 → 9/10
- **주차 평균**: 9.2/10

---

## 7주차: 확장성 검증

### 개발 항목

- [ ] **다중 서버 배포 테스트**
  - [ ] 2개 서버 배포
  - [ ] 4개 서버 배포
  - [ ] 로드 밸런싱 설정
  - [ ] Redis Adapter 동기화 확인

- [ ] **리전 간 동기화**
  - [ ] 글로벌 Redis 설정
  - [ ] 메시지 전파 확인
  - [ ] 네트워크 지연 측정
  - [ ] 일관성 검증

- [ ] **상태 영속화**
  - [ ] Socket 연결 상태 저장
  - [ ] 사용자 세션 저장
  - [ ] 메시지 히스토리 저장
  - [ ] 복구 프로세스 테스트

- [ ] **로드 밸런싱 설정**
  - [ ] Sticky session 설정
  - [ ] Health check 구성
  - [ ] 동적 할당 테스트

### 테스트

- [ ] 2-4개 서버 동시 실행 테스트
- [ ] 리전 간 메시지 동기화 테스트
- [ ] 상태 일관성 검증
- [ ] 10,000 동시 연결 테스트

### 문서화

- [ ] 확장성 아키텍처 다이어그램
- [ ] 배포 가이드
- [ ] 장애 복구 절차

### 예상 점수

- 확장성: 6/10 → 9.5/10
- **주차 평균**: 9.5/10

---

## 8주차: 최종 점검

### 개발 항목

- [ ] **통합 테스트 (전체 플로우)**
  - [ ] 클라이언트 로그인 → 토큰 발급
  - [ ] 토큰 갱신
  - [ ] Trigger 이벤트 발송
  - [ ] ACK 수신
  - [ ] 에러 처리

- [ ] **부하 테스트**
  - [ ] 1,000 메시지/분 처리
  - [ ] 10,000 동시 연결
  - [ ] 메모리 누수 검사
  - [ ] CPU 스파이크 확인

- [ ] **장시간 가동 테스트**
  - [ ] 24시간 연속 운영
  - [ ] 메모리 누수 감지
  - [ ] 연결 안정성 확인
  - [ ] 에러율 추적

- [ ] **문서화 완성**
  - [ ] API 문서 (OpenAPI)
  - [ ] 배포 가이드
  - [ ] 운영 매뉴얼
  - [ ] 트러블슈팅 가이드

- [ ] **CI/CD 자동화**
  - [ ] GitHub Actions 설정
  - [ ] 자동 테스트 실행
  - [ ] 자동 빌드
  - [ ] 자동 배포

### 테스트

- [ ] E2E 통합 테스트
- [ ] 스트레스 테스트 (병렬 1,000 사용자)
- [ ] 장시간 가동 테스트 (24시간)
- [ ] 보안 스캔

### 문서화

- [ ] 최종 아키텍처 다이어그램
- [ ] 성능 지표 보고서
- [ ] 보안 감시 결과
- [ ] 배포 체크리스트

### 예상 점수

- **모든 항목: 9.5/10 → 10/10**
- **최종 평균**: 10/10

---

## 최종 검사 항목

### 성능 검증

- [ ] P95 지연시간 < 250ms
- [ ] 처리량 >= 1,000 메시지/분
- [ ] 동시 연결 >= 10,000
- [ ] 메모리 사용 < 500MB (10K 연결 기준)

### 안정성 검증

- [ ] 메시지 손실률 <= 0.1%
- [ ] 자동 복구율 >= 95%
- [ ] Uptime >= 99.9%
- [ ] 재연결 시간 < 1초

### 보안 검증

- [ ] OWASP Top 10 준수
- [ ] 토큰 관리 중앙화
- [ ] Rate limiting 적용
- [ ] 감사 로그 기록

### 운영성 검증

- [ ] 모니터링 대시보드 작동
- [ ] 알림 시스템 작동
- [ ] 자동 백업 설정
- [ ] CI/CD 자동화

### 확장성 검증

- [ ] 다중 리전 지원
- [ ] 상태 영속화 완료
- [ ] 수평 확장 가능
- [ ] 로드 밸런싱 작동

---

## 주간 완료도 추적

```
┌──────────┬──────────┬──────────┬───────────┬─────────┐
│   주차   │ 목표점수 │ 예상점수 │ 완료도(%) │  상태   │
├──────────┼──────────┼──────────┼───────────┼─────────┤
│ 1주차    │ 6.5/10   │ 6.5/10   │     0%    │ 계획    │
│ 2주차    │ 7.5/10   │ 7.5/10   │     0%    │ 계획    │
│ 3주차    │ 8.0/10   │ 8.0/10   │     0%    │ 계획    │
│ 4주차    │ 8.5/10   │ 8.5/10   │     0%    │ 계획    │
│ 5주차    │ 9.0/10   │ 9.0/10   │     0%    │ 계획    │
│ 6주차    │ 9.2/10   │ 9.2/10   │     0%    │ 계획    │
│ 7주차    │ 9.5/10   │ 9.5/10   │     0%    │ 계획    │
│ 8주차    │ 10.0/10  │ 10.0/10  │     0%    │ 계획    │
│ 합계     │ 68/80    │ 68/80    │     0%    │ 계획    │
└──────────┴──────────┴──────────┴───────────┴─────────┘
```

---

## 성공 기준

### 필수 기준 (Must Have)

- ✅ 메시지 손실률 <= 0.1%
- ✅ P95 지연시간 < 250ms
- ✅ 토큰 관리 중앙화
- ✅ 구조화된 로깅
- ✅ 모니터링 대시보드

### 높은 기준 (Should Have)

- ✅ Circuit Breaker 구현
- ✅ Dead Letter Queue
- ✅ CSRF 방지
- ✅ Rate Limiting
- ✅ 10,000+ 동시 연결

### 목표 기준 (Nice to Have)

- ✅ 다중 리역 지원
- ✅ 자동 백업
- ✅ CI/CD 자동화
- ✅ 보안 감시

---

## 일일 점검 항목

각 날 마지막에 다음을 확인하세요:

```
[ ] 오늘 계획한 작업 완료?
[ ] 테스트 통과?
[ ] 문서 업데이트?
[ ] 코드 리뷰 완료?
[ ] 번그 발견 시 이슈 생성?
[ ] 내일 계획 수립?
```

---

**제출 일**: 2025-11-20 (8주차 목표)

