# ngrok 개발 환경 및 데모데이 준비 가이드

**Task ID:** T-021
**Status:** BACKLOG
**Importance:** SHOULD
**Complexity:** 3/10
**Urgency:** 10/10
**Dependencies:** T-012, T-013, T-014, T-015, T-016, T-017, T-020

## Description

### 요구사항
- ngrok을 활용한 로컬 개발 환경 HTTPS 터널 구성 스마트폰 실제 기기 테스트 가능
- 환경변수 템플릿 .env.local.example 제공 및 설정 가이드 작성
- 스마트폰 테스트 체크리스트 카메라 권한 바코드 스캔 디스플레이 페어링 순서대로 검증
- 데모데이 10월 27일 준비 항목 샘플 바코드 인쇄 디스플레이 PC 설정 참가자용 QR 앱 접속
- 문제 해결 FAQ 자주 발생하는 이슈 및 해결 방법 정리
- README.demo.md 작성 데모 시나리오 및 진행 순서 상세 기술

### 구현 상세

**A. ngrok 설정 가이드**
- ngrok 설치 brew install ngrok 또는 npm install -g ngrok
- 계정 가입 및 인증 토큰 설정 ngrok config add-authtoken YOUR_TOKEN
- Next.js 터널 실행 npm run dev 후 ngrok http 3000
- 고정 도메인 옵션 ngrok http 3000 --domain vooster-demo.ngrok.app 유료
- 환경변수 업데이트 NEXT_PUBLIC_API_URL을 ngrok URL로 변경

**B. 환경변수 템플릿**
- .env.local.example 파일 생성 모든 필수 환경변수 나열 및 설명 추가
- DATABASE_URL Supabase 또는 PostgreSQL 연결 문자열
- JWT_SECRET 32자 이상 랜덤 문자열
- NEXT_PUBLIC_API_URL ngrok URL 또는 프로덕션 도메인
- WS_URL WebSocket 서버 URL wss://도메인 또는 ws://localhost:3000
- NODE_ENV development 또는 production

**C. 스마트폰 테스트 체크리스트**
- [ ] ngrok 터널 실행 및 HTTPS URL 확인
- [ ] 스마트폰을 ngrok URL로 접속
- [ ] 카메라 권한 허용 확인
- [ ] 샘플 바코드 스캔하여 주문 상세 페이지 표시 확인
- [ ] 설정 메뉴 접근 및 디스플레이 목록 조회 확인
- [ ] PC 확장 QR을 스마트폰으로 스캔하여 페어링 확인
- [ ] 바코드 스캔 시 원격 PC에 탭 자동 생성 확인
- [ ] 네트워크 단절 및 재연결 시나리오 테스트

**D. 데모데이 준비 (10월 27일)**
- 샘플 바코드 10개 생성 node scripts/generate-barcodes.js J2025-001부터 J2025-010
- 인쇄 또는 PDF 출력 A4 용지에 10개 바코드 배치 각 바코드 아래 주문명 표시
- 디스플레이 PC 1대 준비 Chrome 브라우저 확장 설치 및 페어링 완료 대형 모니터 또는 TV 연결
- 참가자용 QR 코드 생성 ngrok URL을 QR로 변환하여 포스터 또는 명함 인쇄
- 튜토리얼 화면 준비 첫 접속 시 간단한 가이드 표시 바코드 스캔해보세요 3초 자동 닫힘
- 네트워크 확인 Wi-Fi 또는 LTE 안정성 테스트 ngrok 대역폭 제한 확인 무료 1GB

**E. 문제 해결 FAQ**
- Q 카메라 권한이 거부됨 A HTTPS 확인 브라우저 설정에서 카메라 허용
- Q 바코드 인식 안됨 A 조명 확인 바코드 선명도 확인 거리 조절
- Q 디스플레이 목록이 비어있음 A PC 확장이 실행 중인지 확인 heartbeat 로그 확인
- Q QR 스캔 시 에러 A QR 만료 5분 확인 새 QR 생성
- Q 원격 PC에 탭 안열림 A WebSocket 연결 상태 확인 Service Worker 콘솔 로그 확인

### 의사코드
```pseudo
// scripts/generate-barcodes.js
const JsBarcode = require('jsbarcode')
const { createCanvas } = require('canvas')
const fs = require('fs')

function generateBarcodes() {
  for (let i = 1; i <= 10; i++) {
    const jobNo = `J2025-${String(i).padStart(3, '0')}`
    const canvas = createCanvas(400, 200)

    JsBarcode(canvas, jobNo, {
      format: 'CODE128',
      width: 2,
      height: 100,
      displayValue: true,
    })

    const buffer = canvas.toBuffer('image/png')
    fs.writeFileSync(`./public/demo-barcodes/${jobNo}.png`, buffer)

    console.log(`생성: ${jobNo}.png`)
  }
}

generateBarcodes()

// README.demo.md
# Vooster 데모데이 가이드 (2025-10-27)

## 사전 준비 (10/26)

### 1. 개발 환경 실행
```bash
# Next.js 서버
npm run dev

# ngrok 터널
ngrok http 3000
# 출력: https://abc123.ngrok.io
```

### 2. 환경변수 업데이트
```
NEXT_PUBLIC_API_URL=https://abc123.ngrok.io
```

### 3. 샘플 바코드 생성
```bash
npm run generate:barcodes
# → public/demo-barcodes/*.png
```

### 4. PC 확장 설치 및 설정
- Chrome 확장 로드
- Options: "데모-디스플레이", "커팅 라인"
- QR 표시 (저장)

### 5. 참가자용 QR 인쇄
https://abc123.ngrok.io → QR 변환 → 포스터

## 데모데이 진행 (10/27)

### 오전 준비
- [ ] PC 부팅 및 확장 실행 확인
- [ ] ngrok 재시작 (URL 동일한지 확인)
- [ ] 샘플 바코드 10개 테이블에 배치
- [ ] 디스플레이 연결 상태 확인

### 참가자 체험 시나리오
1. QR 스캔하여 앱 접속
2. "바코드를 스캔해보세요" 안내
3. 샘플 바코드 스캔
4. 큰 화면에 제작의뢰서 표시
5. "와! 신기하다!" 피드백 수집

### 주의사항
- ngrok 무료 제한: 1GB/월 (약 1000명 접속 가능)
- 배터리: PC 전원 연결 확인
- 네트워크: Wi-Fi 또는 LTE 안정성 확인
```

### 테스트 전략
- ngrok 터널 테스트 HTTPS 접속 확인 카메라 권한 허용 확인
- 스마트폰 실기 테스트 iOS Safari Android Chrome에서 모두 테스트
- 샘플 바코드 테스트 생성된 바코드를 실제 스캔하여 인식률 확인
- 동시 접속 테스트 스마트폰 5대로 동시 스캔하여 서버 부하 확인
- 데모 리허설 전체 시나리오를 1회 이상 사전 실행하여 문제점 파악
- 장애 시나리오 네트워크 단절 ngrok 재시작 등 예외 상황 대응 훈련

---

**Created:** 2025-10-23T09:30:00.000Z
**Updated:** 2025-10-23T09:30:00.000Z
