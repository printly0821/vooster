#!/bin/bash

# ============================================================================
# Main Page Barcode Button Commit Script
# ============================================================================
# ëª©ì : ë©”ì¸í˜ì´ì§€ì— ë°”ì½”ë“œ ìŠ¤ìº” í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ì¶”ê°€
# ì‚¬ìš©ë²•: bash scripts/commit-main-page-barcode-button.sh
# ============================================================================

set -e

# ìƒ‰ìƒ ì •ì˜
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m'

# ============================================================================
# í•¨ìˆ˜ ì •ì˜
# ============================================================================

print_header() {
  echo ""
  echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
  echo -e "${BLUE}$1${NC}"
  echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
  echo ""
}

print_success() {
  echo -e "${GREEN}âœ“ $1${NC}"
}

print_warning() {
  echo -e "${YELLOW}âš  $1${NC}"
}

print_error() {
  echo -e "${RED}âœ— $1${NC}"
}

print_info() {
  echo -e "${BLUE}â„¹ $1${NC}"
}

# ============================================================================
# ì‚¬ì „ í™•ì¸
# ============================================================================

print_header "ì‚¬ì „ í™•ì¸ ë‹¨ê³„"

# Git ì €ì¥ì†Œ í™•ì¸
if [ ! -d ".git" ]; then
  print_error "Git ì €ì¥ì†Œê°€ ì—†ìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ ì‹¤í–‰í•˜ì„¸ìš”."
  exit 1
fi

print_success "Git ì €ì¥ì†Œ í™•ì¸ ì™„ë£Œ"

# ============================================================================
# íŒŒì¼ ëª©ë¡ í™•ì¸
# ============================================================================

print_header "ì»¤ë°‹í•  íŒŒì¼ ëª©ë¡"

FILES_TO_COMMIT=(
  "src/app/page.tsx"
)

print_info "ë‹¤ìŒ íŒŒì¼ë“¤ì´ ì»¤ë°‹ë©ë‹ˆë‹¤:"
for file in "${FILES_TO_COMMIT[@]}"; do
  if [ -f "$file" ]; then
    print_success "$file"
  else
    print_warning "$file (ì¡´ì¬í•˜ì§€ ì•ŠìŒ)"
  fi
done

echo ""

# ============================================================================
# Git ìƒíƒœ í™•ì¸
# ============================================================================

print_header "Git ìƒíƒœ í™•ì¸"

echo "í˜„ì¬ ë³€ê²½ì‚¬í•­:"
git status --short

echo ""
echo -e "${YELLOW}ë³€ê²½ì‚¬í•­ì„ ìŠ¤í…Œì´ì§•í•˜ê³  ì»¤ë°‹í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n)${NC}"
read -r response

if [ "$response" != "y" ] && [ "$response" != "Y" ]; then
  print_error "ì»¤ë°‹ ì·¨ì†Œë¨"
  exit 1
fi

# ============================================================================
# Git ìŠ¤í…Œì´ì§•
# ============================================================================

print_header "Git ìŠ¤í…Œì´ì§•"

# ë³€ê²½ëœ íŒŒì¼ë“¤ì„ ìŠ¤í…Œì´ì§•
for file in "${FILES_TO_COMMIT[@]}"; do
  if [ -f "$file" ]; then
    git add "$file" 2>/dev/null || true
    print_success "Staged: $file"
  fi
done

print_success "íŒŒì¼ ìŠ¤í…Œì´ì§• ì™„ë£Œ"

# ============================================================================
# ì»¤ë°‹ ë©”ì‹œì§€ ìƒì„± ë° ì»¤ë°‹
# ============================================================================

print_header "ì»¤ë°‹ ìƒì„±"

git commit -m "$(cat <<'EOF'
feat: ë©”ì¸í˜ì´ì§€ì— ë°”ì½”ë“œ ìŠ¤ìº” í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ì¶”ê°€

## ì£¼ìš” ë³€ê²½ì‚¬í•­

### 1. ë°”ì½”ë“œ ìŠ¤ìº” ë²„íŠ¼ ì¶”ê°€
- ìƒˆë¡œìš´ Primary ë²„íŠ¼: "ğŸ” ë°”ì½”ë“œ ìŠ¤ìº” + ì œì‘ì˜ë¢°ì„œ"
- ë§í¬: `/scan` í˜ì´ì§€ë¡œ ì´ë™
- ìŠ¤íƒ€ì¼: bg-primary + shadow-smìœ¼ë¡œ ê°•ì¡°
- ìœ„ì¹˜: ê°€ì¥ ì™¼ìª½ (ì£¼ìš” ê¸°ëŠ¥)

### 2. ë²„íŠ¼ ë ˆì´ì•„ì›ƒ ê°œì„ 
- flex-wrap ì¶”ê°€ë¡œ ëª¨ë°”ì¼ ìë™ ì¤„ë°”ê¿ˆ
- ë²„íŠ¼ ê°„ê²©: gap-4 â†’ gap-3 (ìµœì í™”)
- 3ê°œ ë²„íŠ¼ êµ¬ì„±ìœ¼ë¡œ í™•ì¥

### 3. ë²„íŠ¼ êµ¬ì„±
1. **ğŸ” ë°”ì½”ë“œ ìŠ¤ìº” + ì œì‘ì˜ë¢°ì„œ** (Primary)
   - ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸ (ë°”ì½”ë“œ ìŠ¤ìº” â†’ ì œì‘ì˜ë¢°ì„œ ì¡°íšŒ)
   - ë©”ì¸ ê¸°ëŠ¥ìœ¼ë¡œ ê°•ì¡°

2. **ğŸ“¸ ì¹´ë©”ë¼ í…ŒìŠ¤íŠ¸** (Secondary)
   - ì¹´ë©”ë¼ ê¸°ëŠ¥ ë‹¨ë… í…ŒìŠ¤íŠ¸
   - ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€

3. **ğŸ“¦ ì£¼ë¬¸ ìƒì„¸ ì˜ˆì‹œ** (Secondary)
   - ì œì‘ì˜ë¢°ì„œ í™”ë©´ ë‹¨ë… í…ŒìŠ¤íŠ¸
   - ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€

## ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

### Before
```
[ğŸ“¸ ì¹´ë©”ë¼ í…ŒìŠ¤íŠ¸] [ğŸ“¦ ì£¼ë¬¸ ìƒì„¸ ì˜ˆì‹œ]
```

### After
```
[ğŸ” ë°”ì½”ë“œ ìŠ¤ìº” + ì œì‘ì˜ë¢°ì„œ] (Primary - ê°•ì¡°)
[ğŸ“¸ ì¹´ë©”ë¼ í…ŒìŠ¤íŠ¸] [ğŸ“¦ ì£¼ë¬¸ ìƒì„¸ ì˜ˆì‹œ]
```

### ê°œì„  íš¨ê³¼
- ë©”ì¸ ê¸°ëŠ¥ì— ì¦‰ì‹œ ì ‘ê·¼ ê°€ëŠ¥
- ì „ì²´ í”Œë¡œìš°ë¥¼ í•œ ë²ˆì— í…ŒìŠ¤íŠ¸
- ì‚¬ìš©ì í¸ì˜ì„± í–¥ìƒ

## ë°˜ì‘í˜• ë””ìì¸
- ëª¨ë°”ì¼: ë²„íŠ¼ì´ ìë™ìœ¼ë¡œ ì¤„ë°”ê¿ˆ (flex-wrap)
- íƒœë¸”ë¦¿/ë°ìŠ¤í¬í†±: í•œ ì¤„ì— ëª¨ë‘ í‘œì‹œ
- ëª¨ë“  í™”ë©´ í¬ê¸°ì—ì„œ ìµœì í™”ëœ ë ˆì´ì•„ì›ƒ

## ë³€ê²½ íŒŒì¼
- src/app/page.tsx

## í…ŒìŠ¤íŠ¸ ë°©ë²•
```bash
npm run dev
# 1. ë©”ì¸í˜ì´ì§€(/) ì ‘ì†
# 2. "ğŸ” ë°”ì½”ë“œ ìŠ¤ìº” + ì œì‘ì˜ë¢°ì„œ" ë²„íŠ¼ í´ë¦­
# 3. /scan í˜ì´ì§€ë¡œ ì´ë™ í™•ì¸
# 4. ë°”ì½”ë“œ ìŠ¤ìº” â†’ ì œì‘ì˜ë¢°ì„œ ì¡°íšŒ í”Œë¡œìš° í…ŒìŠ¤íŠ¸
```

ğŸš€ ë©”ì¸í˜ì´ì§€ì—ì„œ ë°”ë¡œ í•µì‹¬ ê¸°ëŠ¥ ì ‘ê·¼ ê°€ëŠ¥ | ì‚¬ìš©ì í¸ì˜ì„± ê°œì„ 

ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
EOF
)"

COMMIT_RESULT=$?

if [ $COMMIT_RESULT -eq 0 ]; then
  print_success "ì»¤ë°‹ ì™„ë£Œ!"

  # ì»¤ë°‹ ì •ë³´ ì¶œë ¥
  echo ""
  print_header "ì»¤ë°‹ ì •ë³´"
  git log -1 --oneline

  # ë‹¤ìŒ ë‹¨ê³„ ì œì‹œ
  echo ""
  print_header "ë‹¤ìŒ ë‹¨ê³„"
  print_info "1. ë³€ê²½ì‚¬í•­ í™•ì¸:"
  echo -e "   ${BLUE}npm run dev${NC}"
  echo -e "   ${BLUE}ë©”ì¸í˜ì´ì§€(/)ì—ì„œ ìƒˆ ë²„íŠ¼ í™•ì¸${NC}"
  echo ""
  print_info "2. ë°”ì½”ë“œ ìŠ¤ìº” í”Œë¡œìš° í…ŒìŠ¤íŠ¸:"
  echo -e "   ${BLUE}ğŸ” ë°”ì½”ë“œ ìŠ¤ìº” + ì œì‘ì˜ë¢°ì„œ ë²„íŠ¼ í´ë¦­ â†’ /scan í˜ì´ì§€${NC}"
  echo ""
  print_info "3. ì›ê²© ì €ì¥ì†Œì— í‘¸ì‹œ:"
  echo -e "   ${BLUE}git push origin master${NC}"
  echo ""

else
  print_error "ì»¤ë°‹ ì¤‘ ì˜¤ë¥˜ ë°œìƒ"
  exit 1
fi

print_success "ì™„ë£Œ!"
echo ""
